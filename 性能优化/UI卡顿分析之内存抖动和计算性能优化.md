工具： 

TraceView  

Hierarhy view 


卡顿是如何造成的： 

卡主线程了！（卡UI线程） 

	1.	外部引起的：
	1.	比如：activity里面直接进行网络访问/大文件的IO操作
                     
     内存这块儿有些需要注意的： 

      
	1.	内存抖动的问题：
	2.	一个方法太耗时

     new object  

     obj  = null 

      
	•	内存抖动是什么？ 在很短的时间内进行了大量对象的创建 和 回收GC，就会造成内存的抖动。（内存优化的文档）在GC的时候，如果GC时间长的话，主线程就会卡主。

           比如：绘图过程中GC回收。 

渲染刷新机制：

  用户是如何才能感到画面比较流畅呢？ 16ms的时间。屏幕刷新的理想平率 60HZ。 胡凯那个博客的内容。60fps—— 1秒内绘制的帧数。系统会得到发送的VSYNC（垂直刷新）信号去进行渲染，就会正常的绘制。

VSYNC： 两个概念（垂直刷新、绘制）

1)  Refresh rate(刷新频率): 屏幕在一秒时间内刷新屏幕的次数，由硬件的参数决定。比如：60HZ。
2)  Frame rate（帧频率）: GPU在一秒内绘制操作的帧数，比如：60fps

GPU刷新：GPU帮助我们将UI组件等计算成纹理Texture和三维图形Polygons,纹理和三维图像都会缓存到GPU里面的。同时会使用OpenGL 。


	•	什么会造成内存抖动？——大量创建对象的时候，进行了回收GC
	•	如何直观的了解程序发生了内存抖动？——
	◦	操作之前点击，Allcation Tracing ，操作完后再点击，来查看分配情况。（我要看啥？看那个被分配的最多，问题就应该在哪儿。然后定位到这个文件，查看对象生成情况） 【string +  和 Stringbuild ,和 StringBuffer的区别】

     数据结构的使用：确实挺重要的！ 

	•	如何知道所做的事，是在16ms内完成的呢？
	•	内存抖动如何解决


	2.	view本身的卡顿，自定义view要注意的，能否优化
          1）使用Allcation Tracing 来大致定位问题的所在 
          2）使用Trace View来确定详细的问题所在 


如何打开Trace View:  

Tools ——》 android ——》 android device monitor  

Sample base profiling ——》  
     每分配一次就会产生一个柱状图。一次内存分配。 

     一个凹形，昨天柱状表示开始，右面表示结束，中间所经过的路程表示，分配的时间。 

     柱状的中间距离，表示方法执行的时间。 


     那么红，绿，黄代表什么意思？ 

trace view 能帮我们做什么？ 

trace view 各个参数的含义： 

漆黑一片，黑夜来临 

工具不会告诉你答案在哪里，但是可以借助工具来分析，问题在哪儿？定位问题的所在，推测~ 

菲波那切数列 的运算优化。 



优化： 

	1.	渲染性能的优化
	2.	防止过度绘制



地铁模型，16分钟一趟，踩上点了，就可以上车；踩不上点，再等16分钟。 



渲染优化： 

在我们的绘制渲染机制里面比较耗时的： 

	1.	CPU计算时间
	2.	CPU将计算好的Polygons 和 textures传递到GPU时需要时间
	1.	OpenGL ES API允许数据上传到GPU进行缓存。
	3.	GPU进行栅格化
	1.	优化：避免GPU过度绘制（overdraw）
       
什么是栅格化？

过度绘制： 屏幕上的某个像素点重复绘制。   

GPU如何优化：（资料里的i文章，渲染优化）

工具： debug GPU overdraw ,手机开发者选项里的 

	1.	背景经常容易造成过度绘制。debug GPU overdraw。
	1.	由于背景布局设置了背景颜色，同时用到的MD的主题会默认给一个背景。
	1.	解决办法：将主题添加的背景去掉。getWindow().setBackgroundDrawable(null)
	2.	过度绘制是指背景颜色的绘制？包含View的绘制吗？

	2.	  自定义控件如何处理过度绘制。
	1.	可以通过裁剪来处理。



过度绘制指的是背景绘制，还是View的过度绘制。View重叠的时候，不管是背景还是View都算是过度绘制吗？


