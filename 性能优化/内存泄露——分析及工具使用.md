本文主要讲解内训泄露的分析以及所使用到的工具使用方法的介绍！

内存泄露的分析工具主要用到如下几个工具：

1. Android Monitor ——> Android检测工具
2. mat——> MemoryAnalyzer
3. leakcanary

下面将结合一个具体的案例来针对这三个工具的使用方法进行具体的介绍！该系列博客中的代码均随堂在Github同步

下面的代码，展示了一个最常见的内存泄露

提供一个单例的CommUtil实例

```
public class CommUtil {
    private static CommUtil instance;
    private Context context;
    private CommUtil(Context context){
        this.context = context;
    }

    public static CommUtil getInstance(Context context){
        if(instance == null){
            instance = new CommUtil(context);
        }
        return instance;
    }

}

```

在MainActivity中获取MainActivity的实例
```
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        CommUtil commUtil = CommUtil.getInstance(this);

    }
}
```

在应用程序刚创建的时候，MainActivity传递给CommUtil一个Context。当设备旋转的时候，应用程序重新创建，这个时候CommUtil中的static持有了MainActivity的引用造成了内存泄露。

我们将结合这个示例来展示各个工具的使用方式！


# Android Monitor的使用

<img src="raw/pz_after_gc.jpg" width="30%" height="30%">

# MemoryAnalyzer的使用

# leakcanary的使用

本文并未打算详细的讲解通过LeakCanary的使用，因为它已经有非常详尽的官方使用文档了，参见github主页：[square/leakcanary
](https://github.com/square/leakcanary)


